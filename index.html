<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vizio TV Browser</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #000;
    color: #fff;
    display: flex;
    flex-direction: column;
    height: 100vh;
  }
  header {
    background: #111;
    padding: 15px;
    text-align: center;
    font-size: 1.5em;
    font-weight: bold;
  }
  .controls {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: #222;
    padding: 10px;
  }
  #url {
    width: 90%;
    padding: 10px;
    font-size: 1em;
    border-radius: 5px;
    border: none;
    outline: none;
    margin-bottom: 10px;
  }
  button {
    padding: 10px 15px;
    font-size: 1em;
    margin: 3px;
    border: none;
    border-radius: 5px;
    background-color: #1e90ff;
    color: white;
    cursor: pointer;
  }
  iframe {
    flex: 1;
    border: none;
    width: 100%;
  }
  .keyboard {
    display: grid;
    grid-template-columns: repeat(10, 1fr);
    gap: 3px;
    margin-top: 10px;
    justify-items: center;
  }
</style>
</head>
<body>
<header>Vizio TV Browser</header>

<div class="controls">
  <input id="url" placeholder="Type URL or search term">
  <button id="goBtn">Go</button>

  <!-- On-screen keyboard -->
  <div class="keyboard" id="keyboard"></div>
</div>

<iframe id="viewer" src=""></iframe>

<script>
// List of keys for on-screen keyboard
const keys = [
  'Q','W','E','R','T','Y','U','I','O','P',
  'A','S','D','F','G','H','J','K','L',
  'Z','X','C','V','B','N','M',
  '0','1','2','3','4','5','6','7','8','9',
  '.', '/', ':', '-', '_',
  'Space', 'Backspace'
];

// Create keyboard buttons
const keyboardDiv = document.getElementById('keyboard');
keys.forEach(key => {
  const btn = document.createElement('button');
  btn.textContent = key;
  btn.onclick = () => handleKey(key);
  keyboardDiv.appendChild(btn);
});

function handleKey(key) {
  const input = document.getElementById('url');
  if(key === 'Backspace') input.value = input.value.slice(0,-1);
  else if(key === 'Space') input.value += ' ';
  else input.value += key;
}

// Check if site can load in iframe
function canLoadInIframe(url) {
  const blockedSites = [
    'google.com',
    'youtube.com',
    'facebook.com',
    'twitter.com',
    'instagram.com'
  ];
  return !blockedSites.some(site => url.includes(site));
}

// Load site
function loadSite() {
  const input = document.getElementById('url').value.trim();
  if(!input) return;
  let url;
  if(input.includes('.') || input.startsWith('http')) {
    url = input.startsWith('http') ? input : 'https://' + input;
  } else {
    url = 'https://www.google.com/search?q=' + encodeURIComponent(input);
  }

  if(canLoadInIframe(url)) {
    document.getElementById('viewer').src = url;
  } else {
    window.open(url, '_blank'); // Open restricted site
    document.getElementById('viewer').src = '';
  }
}

// Go button
document.getElementById('goBtn').addEventListener('click', loadSite);

// TV remote keys
let inputFocused = true;
const urlInput = document.getElementById('url');
urlInput.focus();

document.addEventListener('keydown', function(e){
  switch(e.key){
    case "ArrowUp":
      if(!inputFocused) scrollIframe('up'); break;
    case "ArrowDown":
      if(!inputFocused) scrollIframe('down'); break;
    case "ArrowLeft":
      if(!inputFocused) scrollIframe('left'); break;
    case "ArrowRight":
      if(!inputFocused) scrollIframe('right'); break;
    case "Enter":
      if(inputFocused) loadSite(); break;
    case "Tab":
      inputFocused = !inputFocused;
      if(inputFocused) urlInput.focus(); else urlInput.blur();
      e.preventDefault(); break;
  }
});

// Scroll iframe function
function scrollIframe(direction){
  const iframe = document.getElementById('viewer');
  const step = 50;
  try {
    iframe.contentWindow.scrollBy(
      direction==='up'?0:direction==='down'?0:direction==='left'?-step:direction==='right'?step:0,
      direction==='up'?-step:direction==='down'?step:0
    );
  } catch(e){
    switch(direction){
      case 'up': iframe.scrollBy(0,-step); break;
      case 'down': iframe.scrollBy(0,step); break;
      case 'left': iframe.scrollBy(-step,0); break;
      case 'right': iframe.scrollBy(step,0); break;
    }
  }
}
</script>
</body>
</html>
